void 0===window.JNotice&&(window.JNoticeSurface=function(config){var _private={inited:!1};Object.defineProperties(this,{inited:{get:function(){return _private.inited},set:function(value){value&&(_private.inited=!0)}}}),this.config=function(key){if("object"==typeof config&&void 0!==key&&Object.keys(config).indexOf(key)>-1)return config[key]},this.init()},window.JNoticeSurface.prototype={node:null,inner:null,notices:[],get side(){var side;return"left"===this.config("side")?"left":"right"},get reverse(){return Boolean(this.config("reverse"))},get classname(){return"notice-surface--"+this.side+(this.reverse?" notice-surface--reverse":"")},init:function(){this.inited||(this.inited=!0,this.node=BX.create({tag:"div",attrs:{class:"notice-surface "+this.classname},html:'<div class="notice-surface__inner"></div>'}),this.node.noticeSurface=this,this.inner=this.node.querySelector(".notice-surface__inner"),BX.ready(BX.delegate((function(){BX.append(this.node,document.body)}),this)))},search:function(notice){if(void 0!==notice&&notice instanceof window.JNotice)for(var i in this.notices)if(this.notices[i]===notice)return i;return!1},create:function(config){var notice=new JNotice(config);return notice.appendTo(this),notice},append:function(notice){if(void 0!==notice&&notice instanceof window.JNotice){if(notice.removed||notice.inserted&&notice.surface!==this)return!1;var index=this.search(notice);return index||(this.notices.push(notice),index=this.notices.length-1,BX.prepend(notice.node,this.inner)),notice.inserted||notice.appendTo(this),index}return!1},remove:function(index){if(void 0!==index&&void 0!==this.notices[index]){var notice=this.notices[index];delete this.notices[index],this.notices.splice(index,1),BX.remove(notice.node),notice.remove()}},clear:function(){for(i in this.notices)void 0!==this.notices[i]&&this.notices[i].remove();this.notices=[]},getItemName:function(item){var bJquery="function"==typeof jQuery,name="",itemTitle=item.querySelector(".js-notice-block__title"),bCatalogDetail,data;return itemTitle&&(name=itemTitle.textContent),(data=-1!==item.getAttribute("class").indexOf("catalog_detail")?item.querySelector(".product-main [data-js-item-name]"):item.querySelector("[data-js-item-name]"))&&(data=bJquery?jQuery(data).data("js-item-name"):BX.data(data,"js-item-name"))&&(name=data),name},getItemImage:function(item){var bJquery="function"==typeof jQuery,src="",image=item.querySelector(".js-notice-block__image img"),dataSrc;if(image)src=image.getAttribute("src"),(dataSrc=bJquery?jQuery(image).data("src"):BX.data(image,"src"))&&!BX.hasClass(image,"lazyloaded")&&(src=dataSrc);else if(image=item.querySelector("meta[itemprop=image]"))src=image.getAttribute("content");else if(image=item.querySelector(".image-list__link link[itemprop=image]"))src=image.getAttribute("href");else if(image=item.querySelector(".image-list-wrapper img")){var dataSrc;src=image.getAttribute("src"),(dataSrc=bJquery?jQuery(image).data("src"):BX.data(image,"src"))&&!BX.hasClass(image,"lazyloaded")&&(src=dataSrc)}return src},onAuth:function(user){if("object"==typeof user&&user&&BX.message("USER_ID")){const content={title:BX.message("NOTICE_AUTHORIZED"),detail:user.login||user.fullname,image:user.image};return this.create({closeable:!0,autoclose:3e3,type:"auth",content:content,link:arAsproOptions.PAGES.PERSONAL_PAGE_URL})}},onAdd2cart:function(items){if("object"==typeof items&&items.length)for(i in items){var item=items[i];if(item instanceof Node&&(item=item.closest(".js-notice-block"))){var bJquery="function"==typeof jQuery,name=this.getItemName(item),src=this.getItemImage(item),content={title:BX.message("NOTICE_ADDED2CART"),detail:name,image:src};if(items.length>1){var cntMore=items.length-1,titles=[BX.message("NOTICE_PRODUCT1"),BX.message("NOTICE_PRODUCT2"),BX.message("NOTICE_PRODUCT0")],cases=[2,0,1,1,1,2];content.detail+='<div class="notice__detail__more font-bold">'+BX.message("NOTICE_MORE").replace("#COUNT#",cntMore).replace("#PRODUCTS#",titles[cntMore%100>4&&cntMore%100<20?2:cases[Math.min(cntMore%10,5)]])+"</div>"}return this.create({closeable:!0,autoclose:3e3,type:"add2cart",link:arAsproOptions.PAGES.BASKET_PAGE_URL,content:content})}}},onAdd2Delay:function(items){if("object"==typeof items&&items.length)for(i in items){var item=items[i];if(item instanceof Node&&(item=item.closest(".js-notice-block"))){var bJquery="function"==typeof jQuery,name=this.getItemName(item),src=this.getItemImage(item),content={title:BX.message("NOTICE_ADDED2DELAY"),detail:name,image:src};if(items.length>1){var cntMore=items.length-1,titles=[BX.message("NOTICE_PRODUCT1"),BX.message("NOTICE_PRODUCT2"),BX.message("NOTICE_PRODUCT0")],cases=[2,0,1,1,1,2];content.detail+='<div class="notice__detail__more font-bold">'+BX.message("NOTICE_MORE").replace("#COUNT#",cntMore).replace("#PRODUCTS#",titles[cntMore%100>4&&cntMore%100<20?2:cases[Math.min(cntMore%10,5)]])+"</div>"}return this.create({closeable:!0,autoclose:3e3,type:"add2delay",link:arAsproOptions.PAGES.BASKET_PAGE_URL+"#delayed",content:content})}}},onAdd2Compare:function(items){if("object"==typeof items&&items.length)for(i in items){var item=items[i];if(item instanceof Node&&(item=item.closest(".js-notice-block"))){var bJquery="function"==typeof jQuery,name=this.getItemName(item),src=this.getItemImage(item),content={title:BX.message("NOTICE_ADDED2COMPARE"),detail:name,image:src};if(items.length>1){var cntMore=items.length-1,titles=[BX.message("NOTICE_PRODUCT1"),BX.message("NOTICE_PRODUCT2"),BX.message("NOTICE_PRODUCT0")],cases=[2,0,1,1,1,2];content.detail+='<div class="notice__detail__more font-bold">'+BX.message("NOTICE_MORE").replace("#COUNT#",cntMore).replace("#PRODUCTS#",titles[cntMore%100>4&&cntMore%100<20?2:cases[Math.min(cntMore%10,5)]])+"</div>"}return this.create({closeable:!0,autoclose:3e3,type:"add2compare",link:arAsproOptions.PAGES.COMPARE_PAGE_URL,content:content})}}}},window.JNoticeSurface.get=function(config){var side,reverse,classname=".notice-surface.notice-surface--"+("left"===(config="object"==typeof config?config:{}).side?"left":"right")+(Boolean(config.reverse)?".notice-surface--reverse":":not(.notice-surface--reverse)"),surface=document.querySelector(classname);return surface=surface?surface.noticeSurface:new window.JNoticeSurface(config)},window.JNotice=function(config){var _private={surface:!1,inited:!1,removed:!1};Object.defineProperties(this,{surface:{get:function(){return _private.surface},set:function(value){void 0!==value&&value instanceof window.JNoticeSurface&&!this.inserted&&!this.removed&&(_private.surface=value,value.append(this),this.show(),BX.onCustomEvent("onAppendNotice",{notice:this}))}},inserted:{get:function(){return _private.surface instanceof window.JNoticeSurface}},inited:{get:function(){return _private.inited},set:function(value){value&&(_private.inited=!0)}},removed:{get:function(){return _private.removed},set:function(value){value&&(_private.removed=!0)}}}),this.config=function(key){if("object"==typeof config&&void 0!==key&&Object.keys(config).indexOf(key)>-1)return config[key]},this.init()},window.JNotice.prototype={node:null,inner:null,closer:null,handlers:{onClickNode:function(event){event||(event=window.event);var target=event.target||event.srcElement;if(void 0!==target&&target&&!target.closest("a")&&!target.closest(".notice__closer")){BX.PreventDefault(event);var notice=target.closest(".notice");notice&&(notice=notice.notice).link.length&&(location.href=notice.link)}},onMouseEnterNode:function(event){event||(event=window.event);var target=event.target||event.srcElement;if(void 0!==target&&target){var notice=target.closest(".notice");notice&&(notice=notice.notice).autoclose&&(notice.closed||notice.stopAutoClose())}},onMouseLeaveNode:function(event){event||(event=window.event);var target=event.target||event.srcElement;if(void 0!==target&&target){var notice=target.closest(".notice");notice&&(notice=notice.notice,BX.removeClass(notice.node,"animate--notice-click"),notice.closed||notice.startAutoClose())}},onMouseDownNode:function(event){event||(event=window.event);var target=event.target||event.srcElement;if(void 0!==target&&target){var notice=target.closest(".notice");notice&&(notice=notice.notice,BX.addClass(notice.node,"animate--notice-click"))}},onMouseUpNode:function(event){event||(event=window.event);var target=event.target||event.srcElement;if(void 0!==target&&target){var notice=target.closest(".notice");notice&&(notice=notice.notice,BX.removeClass(notice.node,"animate--notice-click"))}},onClickCloser:function(event){event||(event=window.event);var target=event.target||event.srcElement;if(void 0!==target&&target){for(var notice=null,parent=target;parent;){if(parent.matches(".notice")){notice=parent;break}parent=parent.parentElement||parent.parentNode}notice&&(notice=notice.notice,BX.addClass(notice.node,"notice--closed"),notice.remove())}}},get visible(){return!BX.hasClass(this.node,"notice--hidden")&&this.inserted},get closed(){return BX.hasClass(this.node,"notice--closed")},get closeable(){return Boolean(this.config("closeable"))},get autoclose(){var autoclose=parseInt(this.config("autoclose"));return autoclose||0},get classname(){var classname=this.config("classname");return"string"==typeof classname?classname:""},get type(){var type=this.config("type");return"string"==typeof type?type:""},get link(){var link=this.config("link");return"string"==typeof link?link:""},get content(){var content=this.config("content");if("function"==typeof content&&(content=content()),"object"==typeof content){var title=void 0!==content.title&&content.title?"function"==typeof content.title?content.title():content.title.toString():"",detail=void 0!==content.detail&&content.detail?"function"==typeof content.detail?content.detail():content.detail.toString():"",image=void 0!==content.image&&content.image?"function"==typeof content.image?content.image():content.image.toString():"",image_link=void 0!==content.image_link&&content.image_link?"function"==typeof content.image_link?content.image_link():content.image_link.toString():"";if(title.length||detail.length||image.length){if(content='<div class="notice__info-wrap">',image){const bSvgImage=image.match(/<svg[\s>]/);bSvgImage||(image=`<img src="${image}" />`),content+='<div class="notice__image-wrap"><div class="notice__image">'+(image_link?'<a href="'+image_link+'">':"")+image+(image_link?"</a>":"")+"</div></div>"}(title||detail)&&(content+='<div class="notice__text-wrap">',title&&(content+='<div class="notice__title switcher-title font-bold">'+title+"</div>"),detail&&(content+='<div class="notice__detail font_14">'+detail+"</div>"),content+="</div>"),content+="</div>"}}return void 0===content?"":content.toString()},init:function(){if(!this.inited){this.inited=!0;var closer=this.closeable?'<span class="notice__closer stroke-theme-hover" title="'+BX.message("NOTICE_CLOSE")+'"><i class="svg inline  svg-inline-" aria-hidden="true"><svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M13 1L1 13M1 1L13 13" stroke="#999999" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg></i></span>':"";this.node=BX.create({tag:"div",attrs:{class:"notice notice--hidden"+(this.classname.length?" "+this.classname:"")+(this.link.length?" notice--link":"")},dataset:{type:this.type},html:closer+'<div class="notice__inner">'+this.content+"</div>"}),this.node.notice=this,this.inner=this.node.querySelector(".notice__inner"),this.closeable&&(this.closer=this.node.querySelector(".notice__closer")),this.bindEvents(),BX.onCustomEvent("onInitNotice",{notice:this})}},bindEvents:function(){this.node&&("function"==typeof this.handlers.onClickNode&&this.node.addEventListener("click",this.handlers.onClickNode),"function"==typeof this.handlers.onMouseEnterNode&&this.node.addEventListener("mouseenter",this.handlers.onMouseEnterNode),"function"==typeof this.handlers.onMouseLeaveNode&&this.node.addEventListener("mouseleave",this.handlers.onMouseLeaveNode),"function"==typeof this.handlers.onMouseEnterNode&&this.node.addEventListener("mousedown",this.handlers.onMouseDownNode),"function"==typeof this.handlers.onMouseLeaveNode&&this.node.addEventListener("mouseup",this.handlers.onMouseUpNode)),this.closeable&&this.closer&&"function"==typeof this.handlers.onClickCloser&&this.closer.addEventListener("click",this.handlers.onClickCloser)},unbindEvents:function(){this.node&&("function"==typeof this.handlers.onClickNode&&this.node.removeEventListener("click",this.handlers.onClickNode),"function"==typeof this.handlers.onMouseEnterNode&&this.node.removeEventListener("mouseenter",this.handlers.onMouseEnterNode),"function"==typeof this.handlers.onMouseLeaveNode&&this.node.removeEventListener("mouseleave",this.handlers.onMouseLeaveNode),"function"==typeof this.handlers.onMouseEnterNode&&this.node.removeEventListener("mousedown",this.handlers.onMouseDownNode),"function"==typeof this.handlers.onMouseLeaveNode&&this.node.removeEventListener("mouseup",this.handlers.onMouseUpNode)),this.closer&&"function"==typeof this.handlers.onClickCloser&&this.closer.removeEventListener("click",this.handlers.onClickCloser)},callback:function(callback){"function"==typeof callback&&callback()},appendTo:function(surface){this.surface=surface},show:function(callback){this.visible?this.callback(callback):(BX.addClass(this.node,"animate--notice-show"),BX.removeClass(this.node,"notice--hidden"),setTimeout(BX.delegate((function(){BX.removeClass(this.node,"animate--notice-show"),this.startAutoClose(),this.callback(callback)}),this),600),BX.onCustomEvent("onShowNotice",{notice:this}))},hide:function(callback){if(this.visible){var that=this;setTimeout((function(){that.node.style.height=that.node.getBoundingClientRect().height+"px",that.node.style.opacity=1,setTimeout((function(){BX.addClass(that.node,"animate--notice-hide"),setTimeout((function(){BX.addClass(that.node,"notice--hidden"),BX.removeClass(that.node,"animate--notice-hide"),that.callback(callback)}),700)}),25),BX.onCustomEvent("onHideNotice",{notice:that})}),100)}else this.callback(callback)},remove:function(){this.removed||(this.removed=!0,this.hide(BX.delegate((function(){this.unbindEvents(),this.inserted&&this.surface.remove(this.surface.search(this)),BX.onCustomEvent("onRemoveNotice",{notice:this})}),this)))},startAutoClose:function(){this.stopAutoClose(),this.autoclose&&(this.autocloseTimer=setTimeout(BX.delegate((function(){this.remove()}),this),this.autoclose))},stopAutoClose:function(){void 0!==this.autocloseTimer&&this.autocloseTimer&&(clearTimeout(this.autocloseTimer),this.autocloseTimer=!1)}});